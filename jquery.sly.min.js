(function(e,x){function U(N,b){function g(a,t,E){E=I(E)?E:b.speed;t&&y&&(t=V(a),G?(a=k[t.centerItem].offCenter,h[C?"activate":"toCenter"](t.centerItem,1)):a>c.min&&a<c.max&&(a=k[t.firstItem].offStart));if(!D||!b.elasticBounds)a=Math.max(Math.min(a,c.max),c.min);a!==c.cur&&(c.cur=a,e.extend(d,V(c.cur)),W(),X(),n.trigger(p+":move",[c,l,d]),D||n.trigger(p+":nav",[c,l,d]),a=b.horizontal?{left:-c.cur+"px"}:{top:-c.cur+"px"},16<E?f.animate(a,E,D?"swing":b.easing,function(){D||n.trigger(p+":moveEnd",[c,
l,d])}):(f.css(a),D||n.trigger(p+":moveEnd",[c,l,d])))}function z(a){m&&(r.cur=Math.round((c.cur-c.min)/(c.max-c.min)*r.max),r.cur=Math.max(Math.min(r.cur,r.max),r.min),m.stop().animate(b.horizontal?{left:r.cur+"px"}:{top:r.cur+"px"},I(a)?a:b.speed,b.easing));Z()}function Z(){O.length&&O.removeClass(b.activeClass).eq(d.activePage).addClass(b.activeClass)}function X(){f.add(m).stop()}function B(a){return I(a)?0>a?0:a>k.length-1?k.length-1:a:a===x?-1:l.index(a)}function q(a,b){return parseInt(a.css(b),
10)}function V(a){a=a||c.cur;for(var b={},d=C?0:w/2,e=0;e<v.length;e++){if(a>=c.max||e===v.length-1){b.activePage=v.length-1;break}if(a<=v[e]+d){b.activePage=e;break}}if(y){for(var g=e=d=!1,f=0;f<k.length;f++){!1===d&&a<=k[f].offStart&&(d=f);!1===g&&a-k[f].size/2<=k[f].offCenter&&(g=f);if(f===k.length-1||!1===e&&a<k[f+1].offEnd)e=f;if(!1!==e)break}b.firstItem=I(d)?d:0;b.centerItem=I(g)?g:b.firstItem;b.lastItem=I(e)?e:b.centerItem}return b}function W(){if(y){var a=0===d.activeItem,t=d.activeItem>=
k.length-1;J.is("button,input")&&J.prop("disabled",a);K.is("button,input")&&K.prop("disabled",t);J[a?"removeClass":"addClass"](b.disabledClass);K[t?"removeClass":"addClass"](b.disabledClass)}O.length&&(a=c.cur<=c.min,t=c.cur>=c.max,P.is("button,input")&&P.prop("disabled",a),Q.is("button,input")&&Q.prop("disabled",t),P[a?"removeClass":"addClass"](b.disabledClass),Q[t?"removeClass":"addClass"](b.disabledClass))}function u(a,b){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1;b&&
(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)}function I(a){return!isNaN(parseFloat(a))&&isFinite(a)}var h=this,n=e(N),$=b.childrenFilter||"*",f=n.children($).eq(0),w=0,j=0,c={cur:0,max:0,min:0},L=e(b.scrollBar).eq(0),m=L.length?L.children().eq(0):0,R=0,M=0,r={cur:0,max:0,min:0},Y=e(b.pagesBar),O=0,v=[],aa="smart"===b.itemNav,C="forceCentered"===b.itemNav,G="centered"===b.itemNav||C,y="basic"===b.itemNav||aa||G||C,l=0,k=[],d={firstItem:0,lastItem:1,centerItem:1,activeItem:-1,activePage:0,
items:0,pages:0},ba=b.scrollSource?e(b.scrollSource):n,U=b.dragSource?e(b.dragSource):n,J=e(b.prev),K=e(b.next),P=e(b.prevPage),Q=e(b.nextPage),H=0,ca=0,D=0,ha=this.reload=function(){var a=0,t=e.extend({},c);clearTimeout(H);w=b.horizontal?n.width():n.height();R=b.horizontal?L.width():L.height();j=b.horizontal?f.outerWidth():f.outerHeight();l=f.children($);k=[];v=[];c.min=0;c.max=Math.max(j-w,0);d.items=l.length;if(y){var E=q(l,b.horizontal?"marginLeft":"marginTop"),F=q(l.slice(-1),b.horizontal?"marginRight":
"marginBottom"),u=0,N=q(f,b.horizontal?"paddingLeft":"paddingTop"),ea=q(f,b.horizontal?"paddingRight":"paddingBottom"),fa="none"!==l.css("float"),a=E?0:F;j=0;l.each(function(a,c){var d=e(c),t=b.horizontal?d.outerWidth(!0):d.outerHeight(!0),f=q(d,"marginTop"),g=q(d,"marginBottom"),h=q(d,"marginLeft"),d=q(d,"marginRight"),h={size:t,offStart:j-(!a||b.horizontal?0:f),offCenter:j-Math.round(w/2-t/2),offEnd:j-w+t-(E?0:d),margins:{top:f,bottom:g,left:h,right:d}};a||(u=-(C?Math.round(w/2-t/2):0)+N,j+=N);
j+=t;!b.horizontal&&!fa&&g&&(f&&0<a)&&(j-=Math.min(f,g));a===l.length-1&&(j+=ea);k.push(h)});f[0].style[b.horizontal?"width":"height"]=j+"px";j-=a;c.min=u;c.max=C?k[k.length-1].offCenter:Math.max(j-w,0);d.activeItem>=k.length&&h.activate(k.length-1)}e.extend(d,V(c.cur));m&&(M=b.dynamicHandle?Math.round(R*w/j):b.horizontal?m.width():m.height(),M=Math.min(Math.max(b.minHandleSize,M),R),r.max=R-M,m[0].style[b.horizontal?"width":"height"]=M+"px");var A=0,F="",B=0;if(C)v=e.map(k,function(a){return a.offCenter});
else for(;A-w<c.max;){var da=Math.min(c.max,A);v.push(da);A+=w;if(A>c.max&&y&&c.max-da<(k[k.length-1].size-a)/2){v[v.length-1]=c.max;break}}if(Y.length){for(a=0;a<v.length;a++)F+=b.pageBuilder(B++);O=e(F).bind("click."+s,function(){h.activatePage(O.index(this))}).appendTo(Y.empty())}l.unbind("."+s).bind("mouseup."+s,function(a){1===a.which&&!D&&h.activate(this)});c.cur<c.min&&g(c.min);c.cur>c.max&&g(c.max);d.pages=v.length;d.slideeSize=j;d.frameSize=w;d.sbSize=R;d.handleSize=M;z(0);W();b.cycleBy&&
(F="mouseenter."+s+" mouseleave."+s,b.pauseOnHover&&n.unbind(F).bind(F,function(a){if(!ca)h["mouseenter"===a.type?"pause":"cycle"](1)}),b.startPaused||h.cycle());n.trigger(p+":load",[e.extend({},c,{old:t}),l,d])};this.prev=function(){h.activate(d.activeItem-1)};this.next=function(){h.activate(d.activeItem+1)};this.prevPage=function(){h.activatePage(d.activePage-1)};this.nextPage=function(){h.activatePage(d.activePage+1)};this.toStart=function(a){if(y){var d=B(a);if(a===x)g(c.min,1);else if(-1!==d){if(G)return;
-1!==d&&g(k[d].offStart)}}else a===x?g(c.min):(a=f.find(a).eq(0),a.length&&(a=b.horizontal?a.offset().left-f.offset().left:a.offset().top-f.offset().top,g(a)));z()};this.toEnd=function(a){if(y){var d=B(a);if(a===x)g(c.max,1);else if(-1!==d){if(G)return;g(k[d].offEnd)}}else a===x?g(c.max):(a=f.find(a).eq(0),a.length&&(d=b.horizontal?a.offset().left-f.offset().left:a.offset().top-f.offset().top,g(d-w+a[b.horizontal?"outerWidth":"outerHeight"]())));z()};this.toCenter=function(a){if(y){var d=B(a);a===
x?g(Math.round(c.max/2+c.min/2),1):-1!==d&&(g(k[d].offCenter),C&&h.activate(d,1))}else a===x?g(Math.round(c.max/2)):(a=f.find(a).eq(0),a.length&&(d=b.horizontal?a.offset().left-f.offset().left:a.offset().top-f.offset().top,g(d-w/2+a[b.horizontal?"outerWidth":"outerHeight"]()/2)));z()};this.activate=function(a,c){if(y&&a!==x){var e=B(a),f=d.activeItem;d.activeItem=e;l.removeClass(b.activeClass).eq(e).addClass(b.activeClass);e!==f&&l.eq(e).trigger(p+":active",[l,d]);c||(G?h.toCenter(e):aa&&(e>=d.lastItem?
h.toStart(e):e<=d.firstItem&&h.toEnd(e)));W()}};this.activatePage=function(a){a=Math.max(Math.min(a,v.length-1),0);g(v[a],y);z()};this.cycle=function(){if(!H&&b.cycleBy&&("items"!==b.cycleBy||k.length))n.trigger(p+":cycleStart",[c,l,d]),function t(){b.cycleInterval&&(H=setTimeout(function(){if(!D)switch(b.cycleBy){case "items":h.activate(d.activeItem>=k.length-1?0:d.activeItem+1);break;case "pages":h.activatePage(d.activePage>=v.length-1?0:d.activePage+1)}n.trigger(p+":cycle",[c,l,d]);t()},b.cycleInterval))}()};
this.pause=function(a){H&&(a||(ca=!0),H=clearTimeout(H),n.trigger(p+":cyclePause",[c,l,d]))};this.toggle=function(){h[H?"pause":"cycle"]()};this.set=function(a,c){e.isPlainObject(a)?e.extend(b,a):b.hasOwnProperty(a)&&(b[a]=c)};this.destroy=function(){n.add(document).add(f).add(l).add(ba).add(m).add(J).add(K).add(P).add(Q).unbind("."+s);f.add(m).css(b.horizontal?"left":"top",0);J.add(K).removeClass(b.disabledClass);Y.empty();e.removeData(N,s)};var S=e(document),T="mousemove."+s+" mouseup."+s;b=e.extend({},
e.fn[p].defaults,b);n.css("overflow","hidden");"static"===n.css("position")&&n.css("position","relative");"static"===L.css("position")&&L.css("position","relative");f.add(m).css(e.extend({position:"absolute"},b.horizontal?{left:0}:{top:0}));ha();y?h.activate(b.startAt):g(b.startAt);z();b.scrollBy&&ba.bind("DOMMouseScroll."+s+" mousewheel."+s,function(a){if(c.min!==c.max){u(a,1);a=a.originalEvent;var e=0;a.wheelDelta&&(e=a.wheelDelta/120);a.detail&&(e=-a.detail/3);a=0>e;y?(a=B((G?C?d.activeItem:d.centerItem:
d.firstItem)+(a?b.scrollBy:-b.scrollBy)),h[G?C?"activate":"toCenter":"toStart"](a)):g(c.cur+(a?b.scrollBy:-b.scrollBy));z()}});b.keyboardNav&&S.bind("keydown."+s,function(a){switch(a.which){case b.horizontal?37:38:u(a);h[b.keyboardNavByPages?"prevPage":"prev"]();break;case b.horizontal?39:40:u(a),h[b.keyboardNavByPages?"nextPage":"next"]()}});b.prev&&J.bind("click."+s,function(a){u(a);h.prev()});b.next&&K.bind("click."+s,function(a){u(a);h.next()});b.prevPage&&P.bind("click."+s,function(a){u(a);h.prevPage()});
b.nextPage&&Q.bind("click."+s,function(a){u(a);h.nextPage()});b.dragContent&&U.bind("mousedown."+s,function(a){if(1===a.which){u(a);var d=a.clientX,h=a.clientY,k=c.cur,r=+new Date,l=a.target,j=0;f.addClass(b.draggedClass);X();S.bind(T,function(a){var A="mouseup"===a.type,n=b.horizontal?a.clientX-d:a.clientY-h,m=k-n;!j&&10<Math.abs(n)&&(j=1,console.log("asdsa",n),f.trigger(p+":dragStart",[c]));m>c.max?m=b.elasticBounds?c.max+(m-c.max)/6:c.max:m<c.min&&(m=b.elasticBounds?c.min+(m-c.min)/6:c.min);if(A&&
16<b.speed)var q=+new Date-r,q=300>q?Math.ceil(Math.pow(6/(q/300),2)*Math.abs(n)/120):0,m=m+(0<n?-q:q);j&&(u(a),l&&(e(l).bind("click."+s,function ga(a){u(a,1);e(this).unbind("click."+s,ga)}),l=0),D=!A,g(m,A,A?b.speed:0),z(A?null:0),j&&f.trigger(p+":drag",[c]),A&&(S.unbind(T),f.removeClass(b.draggedClass),f.trigger(p+":dragEnd",[c])))})}});m&&b.dragHandle&&m.bind("mousedown."+s,function(a){if(1===a.which){u(a);var d=a.clientX,e=a.clientY,f=r.cur,h=-r.cur,k=r.max-r.cur,l=0;m.addClass(b.draggedClass);
X();S.bind(T,function(a){u(a);var j="mouseup"===a.type;a=b.horizontal?a.clientX-d:a.clientY-e;var n=f+a,q=+new Date;D=!j;j&&(S.unbind(T),m.removeClass(b.draggedClass));if(a<k+5&&a>h-5||j){r.cur=Math.max(Math.min(n,r.max),r.min);m.stop()[0].style[b.horizontal?"left":"top"]=r.cur+"px";l||m.trigger(p+":dragStart",[r]);m.trigger(p+":drag",[r]);j&&m.trigger(p+":dragEnd",[r]);if(l<=q||j||a>k||a<h)l=q+50,g(Math.round(r.cur/r.max*(c.max-c.min))+c.min,j,j?b.speed:50);Z()}})}})}var p="sly",s=p;e.fn[p]=function(p,
b){var g=!1,z,x;"undefined"!==typeof p&&!e.isPlainObject(p)&&(g=!1===p?"destroy":p,z=arguments,Array.prototype.shift.call(z));this.each(function(b,B){var q=e.data(B,s);q&&g?q[g]&&q[g].apply(q,z):!q&&!g&&(q=e.data(B,s,new U(B,p)));x||(x=q)});return b&&!g?x:this};e.fn[p].defaults={horizontal:0,itemNav:0,scrollBar:null,dynamicHandle:1,dragHandle:1,minHandleSize:50,pagesBar:null,pageBuilder:function(e){return"<li>"+(e+1)+"</li>"},prev:null,next:null,prevPage:null,nextPage:null,cycleBy:0,cycleInterval:5E3,
pauseOnHover:1,startPaused:0,scrollBy:0,dragContent:0,elasticBounds:0,speed:0,easing:"swing",scrollSource:null,dragSource:null,startAt:0,keyboardNav:0,keyboardNavByPages:0,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}})(jQuery);
